{"ast":null,"code":"var _jsxFileName = \"/Users/srisaibodduluri/Desktop/EWA/Assignment2/frontend/src/CartContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport axios from 'axios';\n\n// Create the CartContext\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartContext = /*#__PURE__*/createContext();\n\n// Custom hook to use the CartContext\nexport const useCart = () => {\n  _s();\n  return useContext(CartContext);\n};\n\n// CartProvider component to provide context values\n_s(useCart, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const CartProvider = ({\n  children\n}) => {\n  _s2();\n  const [cart, setCart] = useState([]);\n  const [totalAmount, setTotalAmount] = useState(0);\n  const [deliveryOption, setDeliveryOption] = useState('store-pickup');\n  useEffect(() => {\n    const storedCart = JSON.parse(localStorage.getItem('cart'));\n    if (storedCart) {\n      setCartItems(storedCart.items);\n      setTotalAmount(storedCart.totalAmount);\n      setDeliveryOption(storedCart.deliveryOption);\n    }\n  }, []);\n\n  // Save the cart to local storage whenever cartItems, totalAmount, or deliveryOption changes\n  useEffect(() => {\n    const saveCartToLocalStorage = () => {\n      const cart = {\n        items: cartItems,\n        totalAmount,\n        deliveryOption\n      };\n      localStorage.setItem('cart', JSON.stringify(cart));\n    };\n    saveCartToLocalStorage();\n  }, [cartItems, totalAmount, deliveryOption]);\n\n  // Function to add an item to the cart\n  const addToCart = (product, quantity = 1) => {\n    const existingItem = cart.find(item => item.id === product.id);\n    if (existingItem) {\n      setCart(prevCart => prevCart.map(item => item.id === product.id ? {\n        ...item,\n        quantity: item.quantity + quantity\n      } : item));\n    } else {\n      setCart(prevCart => [...prevCart, {\n        ...product,\n        quantity\n      }]);\n    }\n  };\n\n  // Function to remove an item from the cart\n  const removeFromCart = productId => {\n    setCart(prevCart => prevCart.filter(item => item.id !== productId));\n  };\n\n  // Function to update item quantity in the cart\n  const updateItemQuantity = (productId, quantity) => {\n    setCart(prevCart => prevCart.map(item => item.id === productId ? {\n      ...item,\n      quantity: Math.max(quantity, 1)\n    } : item));\n  };\n\n  // Function to clear the cart\n  const clearCart = () => {\n    setCart([]);\n  };\n\n  // Function to handle checkout\n  const checkout = async customerData => {\n    const orderDetails = {\n      items: cart.map(item => ({\n        orderId: new Date().getTime(),\n        // Replace with your order ID generation logic\n        productId: item.id,\n        name: item.name,\n        image: item.image,\n        price: item.price,\n        quantity: item.quantity\n      })),\n      totalAmount: totalAmount.toFixed(2),\n      deliveryOption,\n      createdAt: new Date().toISOString()\n    };\n    try {\n      // Make a POST request to store the order in MySQL\n      const response = await axios.post('http://localhost:3030/api/cart', orderDetails);\n      if (response.status === 200 || response.status === 201) {\n        // Clear the cart and local storage after successful checkout\n        clearCart();\n        localStorage.removeItem('cart');\n      }\n    } catch (error) {\n      console.error('Error saving order:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      cart,\n      totalAmount,\n      deliveryOption,\n      addToCart,\n      removeFromCart,\n      updateItemQuantity,\n      clearCart,\n      setDeliveryOption,\n      checkout\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 5\n  }, this);\n};\n_s2(CartProvider, \"8K9ogYSrVpolYAgdlvIbZ/BHcSE=\");\n_c = CartProvider;\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","axios","jsxDEV","_jsxDEV","CartContext","useCart","_s","CartProvider","children","_s2","cart","setCart","totalAmount","setTotalAmount","deliveryOption","setDeliveryOption","storedCart","JSON","parse","localStorage","getItem","setCartItems","items","saveCartToLocalStorage","cartItems","setItem","stringify","addToCart","product","quantity","existingItem","find","item","id","prevCart","map","removeFromCart","productId","filter","updateItemQuantity","Math","max","clearCart","checkout","customerData","orderDetails","orderId","Date","getTime","name","image","price","toFixed","createdAt","toISOString","response","post","status","removeItem","error","console","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/srisaibodduluri/Desktop/EWA/Assignment2/frontend/src/CartContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\nimport axios from 'axios';\n\n// Create the CartContext\nconst CartContext = createContext();\n\n// Custom hook to use the CartContext\nexport const useCart = () => {\n  return useContext(CartContext);\n};\n\n// CartProvider component to provide context values\nexport const CartProvider = ({ children }) => {\n  const [cart, setCart] = useState([]);\n  const [totalAmount, setTotalAmount] = useState(0);\n  const [deliveryOption, setDeliveryOption] = useState('store-pickup');\n\n  useEffect(() => {\n    const storedCart = JSON.parse(localStorage.getItem('cart'));\n    if (storedCart) {\n      setCartItems(storedCart.items);\n      setTotalAmount(storedCart.totalAmount);\n      setDeliveryOption(storedCart.deliveryOption);\n    }\n  }, []);\n\n  // Save the cart to local storage whenever cartItems, totalAmount, or deliveryOption changes\n  useEffect(() => {\n    const saveCartToLocalStorage = () => {\n      const cart = {\n        items: cartItems,\n        totalAmount,\n        deliveryOption,\n      };\n      localStorage.setItem('cart', JSON.stringify(cart));\n    };\n    saveCartToLocalStorage();\n  }, [cartItems, totalAmount, deliveryOption]);\n\n  // Function to add an item to the cart\n  const addToCart = (product, quantity = 1) => {\n    const existingItem = cart.find(item => item.id === product.id);\n    if (existingItem) {\n      setCart(prevCart =>\n        prevCart.map(item =>\n          item.id === product.id ? { ...item, quantity: item.quantity + quantity } : item\n        )\n      );\n    } else {\n      setCart(prevCart => [...prevCart, { ...product, quantity }]);\n    }\n  };\n\n  // Function to remove an item from the cart\n  const removeFromCart = (productId) => {\n    setCart(prevCart => prevCart.filter(item => item.id !== productId));\n  };\n\n  // Function to update item quantity in the cart\n  const updateItemQuantity = (productId, quantity) => {\n    setCart(prevCart =>\n      prevCart.map(item =>\n        item.id === productId ? { ...item, quantity: Math.max(quantity, 1) } : item\n      )\n    );\n  };\n\n  // Function to clear the cart\n  const clearCart = () => {\n    setCart([]);\n  };\n\n  // Function to handle checkout\n  const checkout = async (customerData) => {\n    const orderDetails = {\n      items: cart.map(item => ({\n        orderId: new Date().getTime(), // Replace with your order ID generation logic\n        productId: item.id,\n        name: item.name,\n        image: item.image,\n        price: item.price,\n        quantity: item.quantity,\n      })),\n      totalAmount: totalAmount.toFixed(2),\n      deliveryOption,\n      createdAt: new Date().toISOString(),\n    };\n\n    try {\n      // Make a POST request to store the order in MySQL\n      const response = await axios.post('http://localhost:3030/api/cart', orderDetails);\n      if (response.status === 200 || response.status === 201) {\n        // Clear the cart and local storage after successful checkout\n        clearCart(); \n        localStorage.removeItem('cart');\n      }\n    } catch (error) {\n      console.error('Error saving order:', error);\n    }\n  };\n\n  return (\n    <CartContext.Provider\n      value={{\n        cart,\n        totalAmount,\n        deliveryOption,\n        addToCart,\n        removeFromCart,\n        updateItemQuantity,\n        clearCart,\n        setDeliveryOption,\n        checkout,\n      }}\n    >\n      {children}\n    </CartContext.Provider>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
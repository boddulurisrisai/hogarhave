{"ast":null,"code":"var _jsxFileName = \"/Users/srisaibodduluri/Desktop/EWA/Assignment2/frontend/src/CartContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport axios from 'axios';\n\n// Create the CartContext\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartContext = /*#__PURE__*/createContext();\n\n// Custom hook to use the CartContext\nexport const useCart = () => {\n  _s();\n  return useContext(CartContext);\n};\n\n// CartProvider component to provide context values\n_s(useCart, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const CartProvider = ({\n  children\n}) => {\n  _s2();\n  const [cart, setCart] = useState([]);\n  const [totalAmount, setTotalAmount] = useState(0);\n  const [deliveryOption, setDeliveryOption] = useState('store-pickup');\n  useEffect(() => {\n    // Load cart items from local storage on component mount\n    const storedCart = JSON.parse(localStorage.getItem('cart')) || [];\n    setCart(storedCart);\n\n    // Calculate the total amount whenever the cart changes\n    const newTotalAmount = storedCart.reduce((total, item) => total + item.price * item.quantity, 0);\n    setTotalAmount(newTotalAmount);\n  }, []);\n  useEffect(() => {\n    // Store the cart in local storage whenever it changes\n    localStorage.setItem('cart', JSON.stringify(cart));\n\n    // Calculate the total amount whenever the cart changes\n    const newTotalAmount = cart.reduce((total, item) => total + item.price * item.quantity, 0);\n    setTotalAmount(newTotalAmount);\n  }, [cart]);\n\n  // Function to add an item to the cart\n  const addToCart = (product, quantity = 1) => {\n    const existingItem = cart.find(item => item.id === product.id);\n    if (existingItem) {\n      setCart(prevCart => prevCart.map(item => item.id === product.id ? {\n        ...item,\n        quantity: item.quantity + quantity\n      } : item));\n    } else {\n      setCart(prevCart => [...prevCart, {\n        ...product,\n        quantity\n      }]);\n    }\n  };\n\n  // Function to remove an item from the cart\n  const removeFromCart = productId => {\n    setCart(prevCart => prevCart.filter(item => item.id !== productId));\n  };\n\n  // Function to update item quantity in the cart\n  const updateItemQuantity = (productId, quantity) => {\n    setCart(prevCart => prevCart.map(item => item.id === productId ? {\n      ...item,\n      quantity: Math.max(quantity, 1)\n    } : item));\n  };\n\n  // Function to clear the cart\n  const clearCart = () => {\n    setCart([]);\n  };\n\n  // Function to handle checkout\n  const checkout = async customerData => {\n    const orderDetails = {\n      items: cart.map(item => ({\n        orderId: new Date().getTime(),\n        // Replace with your order ID generation logic\n        productId: item.id,\n        name: item.name,\n        image: item.image,\n        price: item.price,\n        quantity: item.quantity\n      })),\n      totalAmount: totalAmount.toFixed(2),\n      deliveryOption,\n      createdAt: new Date().toISOString()\n    };\n    try {\n      // Make a POST request to store the order in MySQL\n      const response = await axios.post('http://localhost:3030/api/cart', orderDetails);\n      if (response.status === 200 || response.status === 201) {\n        // Clear the cart and local storage after successful checkout\n        clearCart();\n        localStorage.removeItem('cart');\n      }\n    } catch (error) {\n      console.error('Error saving order:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      cart,\n      totalAmount,\n      deliveryOption,\n      addToCart,\n      removeFromCart,\n      updateItemQuantity,\n      clearCart,\n      setDeliveryOption,\n      checkout\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 100,\n    columnNumber: 5\n  }, this);\n};\n_s2(CartProvider, \"8K9ogYSrVpolYAgdlvIbZ/BHcSE=\");\n_c = CartProvider;\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","axios","jsxDEV","_jsxDEV","CartContext","useCart","_s","CartProvider","children","_s2","cart","setCart","totalAmount","setTotalAmount","deliveryOption","setDeliveryOption","storedCart","JSON","parse","localStorage","getItem","newTotalAmount","reduce","total","item","price","quantity","setItem","stringify","addToCart","product","existingItem","find","id","prevCart","map","removeFromCart","productId","filter","updateItemQuantity","Math","max","clearCart","checkout","customerData","orderDetails","items","orderId","Date","getTime","name","image","toFixed","createdAt","toISOString","response","post","status","removeItem","error","console","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/srisaibodduluri/Desktop/EWA/Assignment2/frontend/src/CartContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\nimport axios from 'axios';\n\n// Create the CartContext\nconst CartContext = createContext();\n\n// Custom hook to use the CartContext\nexport const useCart = () => {\n  return useContext(CartContext);\n};\n\n// CartProvider component to provide context values\nexport const CartProvider = ({ children }) => {\n  const [cart, setCart] = useState([]);\n  const [totalAmount, setTotalAmount] = useState(0);\n  const [deliveryOption, setDeliveryOption] = useState('store-pickup');\n\n  useEffect(() => {\n    // Load cart items from local storage on component mount\n    const storedCart = JSON.parse(localStorage.getItem('cart')) || [];\n    setCart(storedCart);\n\n    // Calculate the total amount whenever the cart changes\n    const newTotalAmount = storedCart.reduce((total, item) => total + item.price * item.quantity, 0);\n    setTotalAmount(newTotalAmount);\n  }, []);\n\n  useEffect(() => {\n    // Store the cart in local storage whenever it changes\n    localStorage.setItem('cart', JSON.stringify(cart));\n    \n    // Calculate the total amount whenever the cart changes\n    const newTotalAmount = cart.reduce((total, item) => total + item.price * item.quantity, 0);\n    setTotalAmount(newTotalAmount);\n  }, [cart]);\n\n  // Function to add an item to the cart\n  const addToCart = (product, quantity = 1) => {\n    const existingItem = cart.find(item => item.id === product.id);\n    if (existingItem) {\n      setCart(prevCart =>\n        prevCart.map(item =>\n          item.id === product.id ? { ...item, quantity: item.quantity + quantity } : item\n        )\n      );\n    } else {\n      setCart(prevCart => [...prevCart, { ...product, quantity }]);\n    }\n  };\n\n  // Function to remove an item from the cart\n  const removeFromCart = (productId) => {\n    setCart(prevCart => prevCart.filter(item => item.id !== productId));\n  };\n\n  // Function to update item quantity in the cart\n  const updateItemQuantity = (productId, quantity) => {\n    setCart(prevCart =>\n      prevCart.map(item =>\n        item.id === productId ? { ...item, quantity: Math.max(quantity, 1) } : item\n      )\n    );\n  };\n\n  // Function to clear the cart\n  const clearCart = () => {\n    setCart([]);\n  };\n\n  // Function to handle checkout\n  const checkout = async (customerData) => {\n    const orderDetails = {\n      items: cart.map(item => ({\n        orderId: new Date().getTime(), // Replace with your order ID generation logic\n        productId: item.id,\n        name: item.name,\n        image: item.image,\n        price: item.price,\n        quantity: item.quantity,\n      })),\n      totalAmount: totalAmount.toFixed(2),\n      deliveryOption,\n      createdAt: new Date().toISOString(),\n    };\n\n    try {\n      // Make a POST request to store the order in MySQL\n      const response = await axios.post('http://localhost:3030/api/cart', orderDetails);\n      if (response.status === 200 || response.status === 201) {\n        // Clear the cart and local storage after successful checkout\n        clearCart(); \n        localStorage.removeItem('cart');\n      }\n    } catch (error) {\n      console.error('Error saving order:', error);\n    }\n  };\n\n  return (\n    <CartContext.Provider\n      value={{\n        cart,\n        totalAmount,\n        deliveryOption,\n        addToCart,\n        removeFromCart,\n        updateItemQuantity,\n        clearCart,\n        setDeliveryOption,\n        checkout,\n      }}\n    >\n      {children}\n    </CartContext.Provider>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}